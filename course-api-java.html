<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Complete Course: API Automation with Java & RestAssured ‚Äì Testaurant</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b5fff" />
  <meta name="description" content="A comprehensive, hands-on course for API testing with Java 17, Maven, JUnit 5, and RestAssured using the Testaurant API." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <style>
    /* --- Modern, responsive, accessible base --- */
    :root{
      --bg: #0b0f19;
      --card: #0f172a;
      --muted: #94a3b8;
      --text: #e2e8f0;
      --accent: #0b5fff;
      --accent-strong:#0047ff;
      --ok:#10b981; --warn:#f59e0b; --err:#ef4444;
      --border:#1f2a44;
      --kbd-bg:#111827; --kbd-fg:#e5e7eb;
      --focus:#ffd166;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f8fafc; --card:#ffffff; --text:#0f172a; --muted:#475569;
        --border:#e2e8f0; --kbd-bg:#f1f5f9; --kbd-fg:#0f172a;
      }
    }
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      background: var(--bg); color: var(--text); line-height:1.55;
    }
    a{ color: var(--accent); }
    a:focus, button:focus, [href]:focus { outline: 3px solid var(--focus); outline-offset: 2px; border-radius:6px }
    .skip-link{ position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden }
    .skip-link:focus{ position:fixed; left:16px; top:16px; width:auto; height:auto; padding:10px 14px; background:#111; color:#fff; z-index:9999; border-radius:8px }
    header{
      position:sticky; top:0; z-index:100; backdrop-filter:saturate(140%) blur(8px);
      background: color-mix(in srgb, var(--bg), transparent 20%);
      border-bottom:1px solid var(--border);
    }
    .nav{
      max-width:1100px; margin:0 auto; padding:12px 16px; display:flex; align-items:center; gap:12px; flex-wrap:wrap;
    }
    .brand{ font-weight:800; letter-spacing:.3px; }
    .navlinks{ display:flex; gap:10px; flex-wrap:wrap }
    .navlinks a{
      text-decoration:none; padding:8px 10px; border-radius:8px; color: var(--text);
    }
    .navlinks a:hover{ background: color-mix(in srgb, var(--accent) 12%, transparent) }
    .cta-row{ margin-left:auto; display:flex; gap:8px; flex-wrap:wrap }
    .btn{
      appearance:none; border:none; cursor:pointer; text-decoration:none; font-weight:700;
      padding:10px 14px; border-radius:10px; background:var(--accent); color:white; display:inline-flex; align-items:center; gap:8px;
      transition: transform .06s ease, box-shadow .2s ease, background .2s ease;
      box-shadow: 0 8px 20px rgba(11,95,255,.25);
    }
    .btn:hover{ background:var(--accent-strong); transform: translateY(-1px) }
    .btn.secondary{ background:transparent; color:var(--accent); border:1px solid var(--accent); box-shadow:none }
    .btn.secondary:hover{ background: color-mix(in srgb, var(--accent) 10%, transparent) }

    main{ max-width:1100px; margin: 24px auto; padding: 0 16px }
    h1{ font-size: clamp(1.6rem, 1.2rem + 1.4vw, 2.3rem); margin: 10px 0 6px }
    h2{ font-size: clamp(1.2rem, 1rem + .9vw, 1.6rem); margin: 26px 0 10px }
    h3{ font-size: clamp(1rem, .9rem + .5vw, 1.2rem); margin: 16px 0 8px }
    .lead{ color: var(--muted); margin-bottom: 16px }

    .grid{ display:grid; gap:16px; grid-template-columns: 1fr }
    @media (min-width: 860px){ .grid{ grid-template-columns: 2fr 1fr } }

    .card{
      background: var(--card); border:1px solid var(--border); border-radius: 14px; padding:16px;
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
    }
    .badge{ display:inline-block; padding:3px 8px; border-radius: 999px; font-size:.8rem; background: color-mix(in srgb, var(--accent) 18%, transparent); color: white; }

    pre{
      background: #0b1020; color:#cbd5e1; padding:14px; border-radius:12px; overflow:auto; border:1px solid var(--border)
    }
    code, kbd{ background:var(--kbd-bg); color:var(--kbd-fg); padding:2px 6px; border-radius:6px }
    kbd{ border:1px solid var(--border); box-shadow: inset 0 -1px 0 rgba(255,255,255,.05)}
    table{ width:100%; border-collapse: collapse; overflow:hidden; border-radius:12px; border:1px solid var(--border) }
    th,td{ padding:10px 12px; border-bottom:1px solid var(--border) }
    th{ text-align:left; color:var(--muted); font-weight:700; letter-spacing:.2px }
    tr:hover td{ background: color-mix(in srgb, var(--accent) 6%, transparent) }

    .pill{ display:inline-block; padding:2px 8px; border-radius:999px; border:1px solid var(--border); color:var(--muted) }
    .ok{ color: var(--ok); font-weight:700 }
    .warn{ color: var(--warn); font-weight:700 }
    .err{ color: var(--err); font-weight:700 }

    .anchor-list{ display:flex; gap:8px; flex-wrap:wrap; margin:10px 0 2px }
    .anchor-list a{ border:1px solid var(--border); padding:6px 10px; border-radius:999px; text-decoration:none; color:var(--text) }
    .anchor-list a:hover{ background: color-mix(in srgb, var(--accent) 12%, transparent) }

    .checklist{ list-style:none; padding:0; display:grid; gap:8px }
    .checklist li{
      display:flex; gap:10px; align-items: start; background: color-mix(in srgb, var(--accent) 6%, transparent);
      border:1px dashed var(--border); border-radius:12px; padding:10px 12px;
    }
    .checklist input[type="checkbox"]{ transform: scale(1.2); margin-top:3px }
    .note{ background: color-mix(in srgb, var(--warn) 12%, transparent); border:1px solid var(--border); border-left:4px solid var(--warn); padding:10px 12px; border-radius:10px }
    .success{ background: color-mix(in srgb, var(--ok) 10%, transparent); border-left:4px solid var(--ok) }

    footer{ margin: 40px 0 20px; color: var(--muted); font-size:.95rem }
	
	/* copy buttons for code blocks */
  .pre-wrap { position: relative; }
  .copy-btn {
    position: absolute; top: 10px; right: 10px;
    padding: 8px 10px; border-radius: 8px; border: 1px solid var(--border, #334155);
    background: color-mix(in srgb, var(--accent, #0b5fff) 10%, transparent);
    color: var(--text, #e2e8f0); font-weight: 700; font-size: 12px;
    cursor: pointer; line-height: 1; display: inline-flex; align-items: center; gap: 6px;
  }
  .copy-btn:hover { background: color-mix(in srgb, var(--accent, #0b5fff) 18%, transparent); }
  .copy-btn:focus { outline: 3px solid var(--focus, #ffd166); outline-offset: 2px; }
  .copy-btn[aria-live] { /* reserved for live region button variants */ }
  @media (prefers-color-scheme: light){
    .copy-btn{ color:#0f172a; border-color:#e2e8f0; }
  }
  /* space for the button so it doesn‚Äôt overlap text */
  pre { padding-top: 40px; }
  
  </style>
</head>
<body>
  <a class="skip-link" href="#content">Skip to content</a>

  <header role="banner" aria-label="Top Navigation">
    <div class="nav">
      <div class="brand" aria-label="Course title">Testaurant ‚Ä¢ API Automation Course</div>
      <nav class="navlinks" aria-label="Section navigation">
        <a href="#intro">Intro</a>
        <a href="#theory">Theory</a>
        <a href="#setup">Setup</a>
        <a href="#skeleton">Skeleton</a>
        <a href="#restassured">RestAssured</a>
        <a href="#tests">Tests</a>
        <a href="#neg">Negative</a>
        <a href="#adv">Advanced</a>
        <a href="#checklist">Checklist</a>
        <a href="#exercises">Exercises</a>
      </nav>
      <div class="cta-row" role="group" aria-label="Quick actions">
        <a class="btn secondary" href="https://apps.qualiadept.eu/testaurant/index.html" aria-label="Return to Testaurant main page">‚üµ Main Page</a>
        <a class="btn" href="https://apps.qualiadept.eu/testaurant/api_specs/" aria-label="Open API specifications">üìò API Specs</a>
      </div>
    </div>
  </header>

  <main id="content" role="main">
    <section id="intro" class="card" aria-labelledby="intro-h">
      <h1 id="intro-h">üß™ Complete Course: API Automation with Java & RestAssured</h1>
      <p class="lead">
        Learn to design, build, and scale a professional API automation suite using <strong>Java 17</strong>, <strong>Maven</strong>, <strong>JUnit 5</strong>, and <strong>RestAssured</strong> against the <strong>Testaurant API</strong>.
      </p>
      <div class="anchor-list" aria-label="Quick jumps">
        <a href="#theory">Theory</a>
        <a href="#setup">Local Setup</a>
        <a href="#skeleton">Starter Project</a>
        <a href="#tests">Essential Tests</a>
        <a href="#adv">Advanced Topics</a>
      </div>
      <p class="note success" role="note">
        Tip: Keep the <kbd>API Specs</kbd> open in another tab while coding to align on contracts.
      </p>
    </section>

    <!-- Theory -->
    <section id="theory" class="card" aria-labelledby="theory-h">
      <h2 id="theory-h">1) Theory: Foundations of API Testing</h2>
      <div class="grid">
        <div>
          <h3>1.1 HTTP & REST Essentials</h3>
          <ul>
            <li><strong>Resources</strong> exposed via paths (e.g., <code>/api/menu</code>, <code>/api/orders</code>)</li>
            <li><strong>Methods</strong>: GET (read), POST (create/action), PUT/PATCH (update), DELETE</li>
            <li><strong>Status Codes</strong>: <span class="ok">2xx</span> success, <span class="warn">4xx</span> client errors, <span class="err">5xx</span> server errors</li>
            <li><strong>Idempotency</strong>: repeatable operations (e.g., checkout with the same <code>Idempotency-Key</code>)</li>
            <li><strong>Determinism</strong>: same input ‚Üí same output; avoid flaky tests</li>
          </ul>

          <h3>1.2 Contract-First Thinking</h3>
          <p>
            The OpenAPI contract (<code>api_specs/</code>) is the single source of truth. Tests should verify compliance:
            request/response shapes, status codes, and error formats. Treat the spec as an agreement between teams.
          </p>

          <h3>1.3 Test Design Strategy</h3>
          <ul>
            <li><strong>Happy paths:</strong> expected success flows</li>
            <li><strong>Boundary & edge cases:</strong> pagination limits, min/max quantities</li>
            <li><strong>Negative cases:</strong> invalid input, unauthorized, insufficient stock</li>
            <li><strong>Resilience:</strong> chaos testing with <code>?slow</code> and <code>?chaos</code></li>
            <li><strong>Data strategies:</strong> use seeds/fixtures; isolate data per test</li>
          </ul>
        </div>
        <aside class="card" aria-label="Common pitfalls">
          <h3>Common Pitfalls</h3>
          <ul>
            <li>Coupling to volatile test data (orders from other suites)</li>
            <li>Assertions that are too strict (timestamps, UUIDs)</li>
            <li>No cleanup ‚Üí flaky & brittle tests</li>
            <li>Over-testing UI for API contracts (keep API contract at API layer)</li>
          </ul>
          <h3>Quality Attributes</h3>
          <ul>
            <li>Fast: API tests should complete in seconds</li>
            <li>Reliable: no random sleeps; use timeouts/time-based waits in clients only when needed</li>
            <li>Observable: logs, readable failures, reports</li>
          </ul>
        </aside>
      </div>
    </section>

    <!-- Setup -->
    <section id="setup" class="card" aria-labelledby="setup-h">
      <h2 id="setup-h">2) Local Setup</h2>
      <ol>
        <li>Install <strong>JDK 17+</strong></li>
        <li>Install <strong>Maven 3.8+</strong></li>
        <li>IDE: IntelliJ IDEA or VS Code + Java</li>
      </ol>
      <pre><code>java -version
mvn -v</code></pre>
      <p>If you need a different base URL, you can override with system properties when running tests.</p>
    </section>

    <!-- Starter Project -->
    <section id="skeleton" class="card" aria-labelledby="skeleton-h">
      <h2 id="skeleton-h">3) Starter Project (Copy/Paste)</h2>
      <p>Copy the structure below into a Maven project. Adjust packages as needed.</p>
<pre><code>.
‚îú‚îÄ pom.xml
‚îú‚îÄ src
‚îÇ  ‚îî‚îÄ test
‚îÇ     ‚îú‚îÄ java
‚îÇ     ‚îÇ  ‚îî‚îÄ qa.testaurant.api
‚îÇ     ‚îÇ     ‚îú‚îÄ BaseTest.java
‚îÇ     ‚îÇ     ‚îú‚îÄ HealthTests.java
‚îÇ     ‚îÇ     ‚îú‚îÄ MenuTests.java
‚îÇ     ‚îÇ     ‚îú‚îÄ CartPriceTests.java
‚îÇ     ‚îÇ     ‚îú‚îÄ CheckoutTests.java
‚îÇ     ‚îÇ     ‚îú‚îÄ OrdersAdminTests.java
‚îÇ     ‚îÇ     ‚îî‚îÄ TestData.java
‚îÇ     ‚îî‚îÄ resources
‚îÇ        ‚îî‚îÄ config.properties
‚îî‚îÄ README.md
</code></pre>

      <h3>pom.xml</h3>
<pre><code class="language-xml">&lt;project xmlns="http://maven.apache.org/POM/4.0.0"&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;qa.testaurant&lt;/groupId&gt;
  &lt;artifactId&gt;api-automation&lt;/artifactId&gt;
  &lt;version&gt;1.0.0&lt;/version&gt;

  &lt;properties&gt;
    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;
    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;
    &lt;junit.jupiter.version&gt;5.10.2&lt;/junit.jupiter.version&gt;
    &lt;restassured.version&gt;5.4.0&lt;/restassured.version&gt;
  &lt;/properties&gt;

  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;
      &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;
      &lt;version&gt;${restassured.version}&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;
      &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;
      &lt;version&gt;${junit.jupiter.version}&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;

  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.2.5&lt;/version&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
&lt;/project&gt;
</code></pre>

      <h3>src/test/resources/config.properties</h3>
<pre><code>baseUrl=https://apps.qualiadept.eu/testaurant
adminKey=changeme-admin-key
</code></pre>

      <h3>BaseTest.java</h3>
<pre><code class="language-java">package qa.testaurant.api;

import io.restassured.RestAssured;
import org.junit.jupiter.api.BeforeAll;
import java.io.IOException;
import java.util.Properties;

public class BaseTest {
  protected static String BASE_URL = "https://apps.qualiadept.eu/testaurant";
  protected static String ADMIN_KEY = "changeme-admin-key";

  @BeforeAll
  static void setup() {
    // system props override > config file > defaults
    try {
      Properties p = new Properties();
      p.load(BaseTest.class.getClassLoader().getResourceAsStream("config.properties"));
      BASE_URL = System.getProperty("baseUrl", p.getProperty("baseUrl", BASE_URL));
      ADMIN_KEY = System.getProperty("adminKey", p.getProperty("adminKey", ADMIN_KEY));
    } catch (IOException | NullPointerException ignored) {}

    RestAssured.baseURI = BASE_URL;
  }
}
</code></pre>
    </section>

    <!-- RestAssured -->
    <section id="restassured" class="card" aria-labelledby="rest-h">
      <h2 id="rest-h">4) RestAssured Quick Primer</h2>
      <table role="table" aria-label="RestAssured Cheatsheet">
        <thead><tr><th>Goal</th><th>Example</th></tr></thead>
        <tbody>
          <tr><td>GET with query</td>
            <td><pre><code>given().queryParam("page",1).when().get("/api/menu").then().statusCode(200);</code></pre></td></tr>
          <tr><td>POST with JSON</td>
            <td><pre><code>given().contentType("application/json").body("{\"x\":1}").post("/api/cart/price");</code></pre></td></tr>
          <tr><td>Auth header</td>
            <td><pre><code>given().header("X-API-Key", ADMIN_KEY).get("/api/orders");</code></pre></td></tr>
          <tr><td>Extract field</td>
            <td><pre><code>int id = given().get("/api/orders").then().extract().path("orders[0].id");</code></pre></td></tr>
        </tbody>
      </table>
    </section>

    <!-- Tests -->
    <section id="tests" class="card" aria-labelledby="tests-h">
      <h2 id="tests-h">5) Essential Tests (Happy Paths)</h2>

      <h3>HealthTests.java</h3>
<pre><code class="language-java">package qa.testaurant.api;

import org.junit.jupiter.api.Test;
import static io.restassured.RestAssured.given;
import static org.hamcrest.Matchers.*;

public class HealthTests extends BaseTest {
  @Test
  void health_ok() {
    given()
      .when().get("/api/health")
      .then().statusCode(200)
             .body("ok", equalTo(true));
  }
}
</code></pre>

      <h3>MenuTests.java</h3>
<pre><code class="language-java">package qa.testaurant.api;

import org.junit.jupiter.api.Test;
import static io.restassured.RestAssured.given;
import static org.hamcrest.Matchers.*;

public class MenuTests extends BaseTest {
  @Test
  void menu_pagination_and_currency() {
    given()
      .queryParam("page", 1)
      .queryParam("limit", 5)
      .queryParam("currency", "EUR")
      .when().get("/api/menu")
      .then().statusCode(200)
             .body("items.size()", greaterThan(0));
  }
}
</code></pre>

      <h3>CartPriceTests.java</h3>
<pre><code class="language-java">package qa.testaurant.api;

import org.junit.jupiter.api.Test;
import static io.restassured.RestAssured.given;
import static org.hamcrest.Matchers.*;

public class CartPriceTests extends BaseTest {
  @Test
  void cart_price_works() {
    String body = """
      {"items":[{"id":1,"qty":1}],"deliveryMethod":"pickup"}
      """;
    given()
      .contentType("application/json")
      .body(body)
      .when().post("/api/cart/price")
      .then().statusCode(200)
             .body("grandTotal", greaterThan(0f));
  }
}
</code></pre>

      <h3>CheckoutTests.java (Idempotency)</h3>
<pre><code class="language-java">package qa.testaurant.api;

import org.junit.jupiter.api.Test;
import static io.restassured.RestAssured.given;

public class CheckoutTests extends BaseTest {
  @Test
  void checkout_idempotent() {
    String idem = "demo-" + System.currentTimeMillis();
    String payload = """
    {"customerName":"Jane QA","customerPhone":"+40123456789",
     "items":[{"id":1,"qty":1}],
     "paymentMethod":"card","deliveryMethod":"pickup"}""";

    int first = given()
      .header("Idempotency-Key", idem)
      .contentType("application/json")
      .body(payload)
      .when().post("/api/checkout")
      .then().statusCode(200)
             .extract().path("orderId");

    int second = given()
      .header("Idempotency-Key", idem)
      .contentType("application/json")
      .body(payload)
      .when().post("/api/checkout")
      .then().statusCode(200)
             .extract().path("orderId");

    org.junit.jupiter.api.Assertions.assertEquals(first, second);
  }
}
</code></pre>

      <h3>OrdersAdminTests.java</h3>
<pre><code class="language-java">package qa.testaurant.api;

import org.junit.jupiter.api.Test;
import static io.restassured.RestAssured.given;
import static org.hamcrest.Matchers.*;

public class OrdersAdminTests extends BaseTest {
  @Test
  void list_orders_admin() {
    given()
      .header("X-API-Key", ADMIN_KEY)
      .queryParam("page", 1)
      .queryParam("limit", 10)
      .when().get("/api/orders")
      .then().statusCode(200)
             .body("orders", notNullValue());
  }
}
</code></pre>
    </section>

    <!-- Negative & Edge -->
    <section id="neg" class="card" aria-labelledby="neg-h">
      <h2 id="neg-h">6) Negative & Edge Cases</h2>
      <table>
        <thead><tr><th>Area</th><th>Scenario</th><th>Expectation</th></tr></thead>
        <tbody>
          <tr><td>Coupons</td><td>Below <code>minSubtotal</code></td><td class="err">422 validation error</td></tr>
          <tr><td>Stock</td><td>Order &gt; stock</td><td class="err">409 conflict ‚ÄúInsufficient stock‚Äù</td></tr>
          <tr><td>Auth</td><td>Missing admin key for admin path</td><td class="err">403 forbidden</td></tr>
          <tr><td>Pagination</td><td>limit=0 or &gt;100</td><td class="warn">Clamped to valid range</td></tr>
          <tr><td>Chaos</td><td><code>?slow=800</code> or <code>?chaos=1</code></td><td class="warn">Client retry/backoff logic validated</td></tr>
        </tbody>
      </table>

      <h3>Example: Insufficient Stock</h3>
<pre><code class="language-java">package qa.testaurant.api;

import org.junit.jupiter.api.Test;
import static io.restassured.RestAssured.given;

public class NegativeStockTests extends BaseTest {
  @Test
  void insufficient_stock_returns_409() {
    String body = """
      {"items":[{"id":1,"qty":99999}],"deliveryMethod":"pickup"}
      """;
    given()
      .contentType("application/json")
      .body(body)
      .when().post("/api/cart/price")
      .then().statusCode(409);
  }
}
</code></pre>
    </section>

    <!-- Advanced -->
    <section id="adv" class="card" aria-labelledby="adv-h">
      <h2 id="adv-h">7) Advanced Topics</h2>
      <div class="grid">
        <div>
          <h3>7.1 JSON Schema Validation</h3>
          <p>Keep small inline schemas to validate response structure quickly.</p>
<pre><code class="language-java">import static io.restassured.module.jsv.JsonSchemaValidator.matchesJsonSchema;

String orderSchema = """
{
  "$schema":"http://json-schema.org/draft-07/schema#",
  "type":"object",
  "required":["id","status","items","total_amount"],
  "properties":{
    "id":{"type":"integer"},
    "status":{"type":"string"},
    "items":{"type":"array"},
    "total_amount":{"type":"number"}
  }
}
""";

given().header("X-API-Key", ADMIN_KEY)
  .when().get("/api/orders/1")
  .then().statusCode(200)
  .body(matchesJsonSchema(orderSchema));
</code></pre>

          <h3>7.2 Parameterized Tests</h3>
<pre><code class="language-java">import org.junit.jupiter.params.ParameterizedTest;
import org.junit.jupiter.params.provider.ValueSource;
import static io.restassured.RestAssured.given;

class CurrencyParamTests extends BaseTest {
  @ParameterizedTest
  @ValueSource(strings = {"RON","EUR","USD"})
  void menu_supports_currency(String cur){
    given().queryParam("currency", cur)
      .when().get("/api/menu")
      .then().statusCode(200);
  }
}
</code></pre>

          <h3>7.3 Retry & Backoff (Resilience)</h3>
<pre><code class="language-java">int attempts = 0, max = 3; long sleep = 400;
while (true) {
  var r = io.restassured.RestAssured.given().get("/api/health?chaos=1");
  if (r.statusCode() == 200) break;
  if (++attempts >= max) throw new AssertionError("health failed after retries");
  try { Thread.sleep(sleep); } catch (InterruptedException ignored) {}
  sleep *= 2;
}
</code></pre>
        </div>

        <aside class="card" aria-label="CI & Reporting">
          <h3>7.4 CI & Reporting</h3>
          <ul>
            <li>Split tests into suites (smoke, regression, admin)</li>
            <li>Run on every PR; keep runtime under 5 min</li>
            <li>Archive <code>surefire-reports/</code> artifacts</li>
          </ul>
          <h3>7.5 Data Management</h3>
          <ul>
            <li>Prefer read-only tests on prod; destructive tests on staging</li>
            <li>Use <code>seed.sql</code> or admin endpoints to prep data</li>
          </ul>
          <h3>7.6 Observability</h3>
          <ul>
            <li>Log requests on failure (URI, payload, headers)</li>
            <li>Record idempotency keys per test for debugging</li>
          </ul>
        </aside>
      </div>
    </section>

    <!-- Checklist -->
    <section id="checklist" class="card" aria-labelledby="checklist-h">
      <h2 id="checklist-h">8) Progress Checklist</h2>
      <ul class="checklist" id="todo" role="list">
        <li><input type="checkbox" data-key="jdk" id="c1"><label for="c1">Installed JDK & Maven</label></li>
        <li><input type="checkbox" data-key="skeleton" id="c2"><label for="c2">Created project skeleton</label></li>
        <li><input type="checkbox" data-key="health" id="c3"><label for="c3">Health test passing</label></li>
        <li><input type="checkbox" data-key="menu" id="c4"><label for="c4">Menu tests for pagination/currency</label></li>
        <li><input type="checkbox" data-key="checkout" id="c5"><label for="c5">Checkout idempotency test</label></li>
        <li><input type="checkbox" data-key="admin" id="c6"><label for="c6">Admin endpoints with X-API-Key</label></li>
        <li><input type="checkbox" data-key="neg" id="c7"><label for="c7">Negative tests (422/409/403)</label></li>
        <li><input type="checkbox" data-key="adv" id="c8"><label for="c8">Advanced: schema, retries</label></li>
      </ul>
    </section>

    <!-- Exercises -->
    <section id="exercises" class="card" aria-labelledby="ex-h">
      <h2 id="ex-h">9) Exercises & Milestones</h2>

      <h3>9.1 Hands-on Tasks</h3>
      <ol>
        <li>Create a test for <code>GET /api/categories</code> and assert it‚Äôs non-empty.</li>
        <li>Write a test that sets stock to <code>1</code> for item X (admin), performs one successful checkout, then asserts the second checkout fails with <code>409</code>.</li>
        <li>Parametrize currency and validate converted display fields exist where applicable.</li>
        <li>Test coupon validation success/failure paths.</li>
        <li>Call <code>/api/stats</code> for a recent date range and assert <code>orders_count</code> >= 1 after placing orders.</li>
      </ol>

      <h3>9.2 TestData.java (Helper)</h3>
<pre><code class="language-java">package qa.testaurant.api;

import java.util.concurrent.ThreadLocalRandom;

public class TestData {
  public static String phone() {
    return "+40" + (700000000 + ThreadLocalRandom.current().nextInt(0, 99999999));
  }
  public static String name() {
    return "QA-" + System.currentTimeMillis();
  }
}
</code></pre>

      <p class="note">Run all tests with custom properties:</p>
      <pre><code>mvn -DbaseUrl=https://apps.qualiadept.eu/testaurant -DadminKey=YOUR_KEY test</code></pre>
    </section>

    <footer role="contentinfo" aria-label="Footer">
      <p>
        Need the API contract? Open <strong>API Specs</strong> here: 
        <a href="https://apps.qualiadept.eu/testaurant/api_specs/">https://apps.qualiadept.eu/testaurant/api_specs/</a>.
        Return to <a href="https://apps.qualiadept.eu/testaurant/index.html">Main Page</a>.
      </p>
      <p class="pill" aria-label="Version">Course v1.0 ‚Ä¢ Designed for Testaurant QA Community</p>
    </footer>
  </main>

  <script>
    // Accessible localStorage checklist persistence
    (function(){
      const list = document.getElementById('todo');
      if(!list) return;
      const KEY = 'testaurant_api_course_checklist_v1';
      const state = JSON.parse(localStorage.getItem(KEY) || '{}');
      [...list.querySelectorAll('input[type="checkbox"][data-key]')].forEach(cb=>{
        const k = cb.dataset.key;
        cb.checked = !!state[k];
        cb.addEventListener('change', ()=>{
          state[k] = cb.checked;
          localStorage.setItem(KEY, JSON.stringify(state));
        });
      });
    })();
	
  </script>
  <script>
(function () {
  // Find all <pre><code> blocks; skip those marked with data-no-copy
  const blocks = Array.from(document.querySelectorAll('pre'))
    .filter(pre => !pre.matches('[data-no-copy]'));

  blocks.forEach(pre => {
    // Wrap <pre> to allow absolute-positioned button
    pre.classList.add('pre-wrap');

    const btn = document.createElement('button');
    btn.className = 'copy-btn';
    btn.type = 'button';
    btn.setAttribute('aria-label', 'Copy code to clipboard');
    btn.setAttribute('title', 'Copy');
    btn.textContent = 'Copy';

    // Visually hidden live region for screen readers to announce status
    const live = document.createElement('span');
    live.setAttribute('aria-live', 'polite');
    live.className = 'sr-only';
    live.style.position = 'absolute';
    live.style.width = '1px';
    live.style.height = '1px';
    live.style.overflow = 'hidden';
    live.style.clip = 'rect(1px,1px,1px,1px)';
    live.style.clipPath = 'inset(50%)';
    live.style.whiteSpace = 'nowrap';
    btn.appendChild(live);

    btn.addEventListener('click', async () => {
      const code = pre.querySelector('code');
      const text = code ? code.innerText : pre.innerText; // preserve formatting
      try {
        if (navigator.clipboard && navigator.clipboard.writeText) {
          await navigator.clipboard.writeText(text);
        } else {
          // Fallback for older browsers
          const ta = document.createElement('textarea');
          ta.value = text;
          ta.setAttribute('readonly', '');
          ta.style.position = 'fixed';
          ta.style.top = '-1000px';
          document.body.appendChild(ta);
          ta.select();
          document.execCommand('copy');
          document.body.removeChild(ta);
        }
        const old = btn.textContent.replace(/\s*Copied!?$/, '');
        btn.textContent = 'Copied!';
        live.textContent = 'Copied to clipboard';
        setTimeout(() => { btn.textContent = old || 'Copy'; live.textContent = ''; }, 1500);
      } catch (e) {
        const old = btn.textContent;
        btn.textContent = 'Failed';
        live.textContent = 'Copy failed';
        setTimeout(() => { btn.textContent = old; live.textContent = ''; }, 1500);
      }
    });

    pre.appendChild(btn);
  });
})();
</script>

</body>
</html>
