<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Instructions & Test Ideas ‚Äì Testaurant QA Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b5fff" />
  <meta name="description" content="Comprehensive testing playbook for Testaurant: API and Web test ideas, expectations, negative cases, chaos, data seeding, accessibility, i18n, currency, and admin checks." />

  <!-- Modern, responsive, accessible base -->
  <style>
    :root{
      --bg:#0b0f19; --card:#0f172a; --muted:#94a3b8; --text:#e2e8f0;
      --accent:#0b5fff; --accent-strong:#0047ff;
      --ok:#10b981; --warn:#f59e0b; --err:#ef4444;
      --border:#1f2a44; --kbd-bg:#111827; --kbd-fg:#e5e7eb; --focus:#ffd166;
    }
    @media (prefers-color-scheme: light){
      :root{ --bg:#f8fafc; --card:#ffffff; --text:#0f172a; --muted:#475569; --border:#e2e8f0; --kbd-bg:#f1f5f9; --kbd-fg:#0f172a; }
    }
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{ margin:0; font-family: system-ui, -apple-system, Segoe UI, Inter, Roboto, Arial, sans-serif; background:var(--bg); color:var(--text); line-height:1.55 }
    a{ color:var(--accent) }
    a:focus, button:focus, [href]:focus{ outline:3px solid var(--focus); outline-offset:2px; border-radius:6px }
    .skip-link{ position:absolute; left:-9999px; width:1px; height:1px; overflow:hidden }
    .skip-link:focus{ position:fixed; left:16px; top:16px; width:auto; height:auto; padding:10px 14px; background:#111; color:#fff; z-index:9999; border-radius:8px }

    header{ position:sticky; top:0; z-index:100; backdrop-filter:saturate(140%) blur(8px); background: color-mix(in srgb, var(--bg), transparent 20%); border-bottom:1px solid var(--border) }
    .nav{ max-width:1100px; margin:0 auto; padding:12px 16px; display:flex; align-items:center; gap:12px; flex-wrap:wrap }
    .brand{ font-weight:800; letter-spacing:.3px }
    .navlinks{ display:flex; gap:10px; flex-wrap:wrap }
    .navlinks a{ text-decoration:none; padding:8px 10px; border-radius:8px; color:var(--text) }
    .navlinks a:hover{ background: color-mix(in srgb, var(--accent) 12%, transparent) }
    .cta-row{ margin-left:auto; display:flex; gap:8px; flex-wrap:wrap }
    .btn{ appearance:none; border:none; cursor:pointer; text-decoration:none; font-weight:700; padding:10px 14px; border-radius:10px; background:var(--accent); color:white; display:inline-flex; align-items:center; gap:8px; transition: transform .06s ease, box-shadow .2s ease, background .2s ease; box-shadow:0 8px 20px rgba(11,95,255,.25) }
    .btn:hover{ background:var(--accent-strong); transform: translateY(-1px) }
    .btn.secondary{ background:transparent; color:var(--accent); border:1px solid var(--accent); box-shadow:none }
    .btn.secondary:hover{ background: color-mix(in srgb, var(--accent) 10%, transparent) }

    main{ max-width:1100px; margin:24px auto; padding:0 16px }
    h1{ font-size: clamp(1.6rem, 1.2rem + 1.4vw, 2.3rem); margin:10px 0 6px }
    h2{ font-size: clamp(1.2rem, 1rem + .9vw, 1.6rem); margin:26px 0 10px }
    h3{ font-size: clamp(1rem, .9rem + .5vw, 1.2rem); margin:16px 0 8px }
    .lead{ color:var(--muted); margin-bottom:16px }

    .grid{ display:grid; gap:16px; grid-template-columns:1fr }
    @media (min-width: 960px){ .grid{ grid-template-columns: 2fr 1fr } }

    .card{ background:var(--card); border:1px solid var(--border); border-radius:14px; padding:16px; box-shadow:0 10px 30px rgba(0,0,0,.08) }
    .badge{ display:inline-block; padding:3px 8px; border-radius:999px; font-size:.8rem; background: color-mix(in srgb, var(--accent) 18%, transparent); color:white }

    pre{ background:#0b1020; color:#cbd5e1; padding:14px; border-radius:12px; overflow:auto; border:1px solid var(--border); padding-top:40px }
    code,kbd{ background:var(--kbd-bg); color:var(--kbd-fg); padding:2px 6px; border-radius:6px }
    kbd{ border:1px solid var(--border); box-shadow: inset 0 -1px 0 rgba(255,255,255,.05) }

    table{ width:100%; border-collapse: collapse; overflow:hidden; border-radius:12px; border:1px solid var(--border) }
    th,td{ padding:10px 12px; border-bottom:1px solid var(--border) }
    th{ text-align:left; color:var(--muted); font-weight:700; letter-spacing:.2px }
    tr:hover td{ background: color-mix(in srgb, var(--accent) 6%, transparent) }

    .ok{ color:var(--ok); font-weight:700 } .warn{ color:var(--warn); font-weight:700 } .err{ color:var(--err); font-weight:700 }
    .anchor-list{ display:flex; gap:8px; flex-wrap:wrap; margin:10px 0 2px }
    .anchor-list a{ border:1px solid var(--border); padding:6px 10px; border-radius:999px; text-decoration:none; color:var(--text) }
    .anchor-list a:hover{ background: color-mix(in srgb, var(--accent) 12%, transparent) }

    .checklist{ list-style:none; padding:0; display:grid; gap:8px }
    .checklist li{ display:flex; gap:10px; align-items:start; background: color-mix(in srgb, var(--accent) 6%, transparent); border:1px dashed var(--border); border-radius:12px; padding:10px 12px }
    .checklist input[type="checkbox"]{ transform: scale(1.2); margin-top:3px }

    .note{ background: color-mix(in srgb, var(--warn) 12%, transparent); border:1px solid var(--border); border-left:4px solid var(--warn); padding:10px 12px; border-radius:10px }
    .success{ background: color-mix(in srgb, var(--ok) 10%, transparent); border-left:4px solid var(--ok) }

    footer{ margin:40px 0 20px; color:var(--muted); font-size:.95rem }

    /* Copy button */
    .pre-wrap{ position:relative }
    .copy-btn{
      position:absolute; top:10px; right:10px; padding:8px 10px; border-radius:8px;
      border:1px solid var(--border); background: color-mix(in srgb, var(--accent) 10%, transparent);
      color:var(--text); font-weight:700; font-size:12px; cursor:pointer; line-height:1; display:inline-flex; align-items:center; gap:6px
    }
    .copy-btn:hover{ background: color-mix(in srgb, var(--accent) 18%, transparent) }
    .copy-btn:focus{ outline:3px solid var(--focus); outline-offset:2px }
    @media (prefers-color-scheme: light){
      .copy-btn{ color:#0f172a; border-color:#e2e8f0 }
    }
  </style>
</head>
<body>
  <a class="skip-link" href="#content">Skip to content</a>

  <header role="banner" aria-label="Top Navigation">
    <div class="nav">
      <div class="brand" aria-label="Page Title">Testaurant ‚Ä¢ Instructions & Test Ideas</div>
      <nav class="navlinks" aria-label="Section navigation">
        <a href="#overview">Overview</a>
        <a href="#api-smoke">API Smoke</a>
        <a href="#api-functional">API Functional</a>
        <a href="#api-negative">API Negative</a>
        <a href="#web-ui">Web/UI Matrix</a>
        <a href="#admin">Admin</a>
        <a href="#chaos">Chaos</a>
        <a href="#data">Data</a>
        <a href="#i18n-currency">i18n & Currency</a>
        <a href="#accessibility">Accessibility</a>
        <a href="#perf">Performance</a>
        <a href="#checklist">Checklist</a>
      </nav>
      <div class="cta-row" role="group" aria-label="Quick actions">
        <a class="btn secondary" href="https://apps.qualiadept.eu/testaurant/frontend/index.html" aria-label="Return to Testaurant main page">‚üµ Main Page</a>
        <a class="btn" href="https://apps.qualiadept.eu/testaurant/api_specs/" aria-label="Open API specifications">üìò API Specs</a>
      </div>
    </div>
  </header>

  <main id="content" role="main">
    <!-- Overview -->
    <section id="overview" class="card" aria-labelledby="overview-h">
      <h1 id="overview-h">üìã Instructions & Test Ideas Hub</h1>
      <p class="lead">This hub provides hands-on test ideas and expectations for the <strong>Testaurant</strong> API and Web app. Use it to guide exploratory testing, build regression suites, and coach learners.</p>
      <div class="anchor-list" aria-label="Quick jumps">
        <a href="#api-smoke">API Smoke</a>
        <a href="#api-functional">API Functional</a>
        <a href="#web-ui">Web/UI Matrix</a>
        <a href="#admin">Admin Scenarios</a>
        <a href="#chaos">Chaos & Resilience</a>
        <a href="#i18n-currency">i18n/Currency</a>
      </div>
      <p class="note success">Tip: Keep the API contract open: <code>/api_specs/</code>. Validate endpoints, shapes, and error formats against the spec while testing.</p>
    </section>

    <!-- API Smoke -->
    <section id="api-smoke" class="card" aria-labelledby="smoke-h">
      <h2 id="smoke-h">1) API Smoke Suite</h2>
      <table role="table" aria-label="API smoke tests">
        <thead><tr><th>Endpoint</th><th>Action</th><th>Expectation</th></tr></thead>
        <tbody>
          <tr><td><code>GET /api/health</code></td><td>Ping</td><td class="ok">200 &amp; <code>{"ok":true}</code></td></tr>
          <tr><td><code>GET /api/categories</code></td><td>List</td><td class="ok">Array non-empty</td></tr>
          <tr><td><code>GET /api/menu?page=1&amp;limit=8</code></td><td>Page 1</td><td class="ok">Contains items; pagination keys present</td></tr>
          <tr><td><code>GET /api/coupons/validate?code=DEMO</code></td><td>Check</td><td class="ok">Returns <code>valid</code> boolean</td></tr>
          <tr><td><code>POST /api/cart/price</code></td><td>Price 1‚Äì2 items</td><td class="ok">Totals computed; correct VAT</td></tr>
          <tr><td><code>POST /api/checkout</code></td><td>Create order</td><td class="ok">Order created, payment info</td></tr>
        </tbody>
      </table>

      <h3>Quick cURL Snippets</h3>
      <pre><code># Health
curl -s https://apps.qualiadept.eu/testaurant/api/health

# Menu (EUR)
curl -s "https://apps.qualiadept.eu/testaurant/api/menu?page=1&amp;limit=5&amp;currency=EUR"

# Price cart
curl -s -X POST https://apps.qualiadept.eu/testaurant/api/cart/price \
  -H "Content-Type: application/json" \
  -d '{"items":[{"id":1,"qty":1},{"id":2,"qty":1}],"deliveryMethod":"pickup"}'

# Checkout (idempotent)
IDEM="demo-$(date +%s)"
curl -s -X POST https://apps.qualiadept.eu/testaurant/api/checkout \
  -H "Content-Type: application/json" -H "Idempotency-Key: $IDEM" \
  -d '{"customerName":"QA","customerPhone":"+40123456789","items":[{"id":1,"qty":1}],"paymentMethod":"card","deliveryMethod":"pickup"}'
</code></pre>
    </section>

    <!-- API Functional -->
    <section id="api-functional" class="card" aria-labelledby="api-func-h">
      <h2 id="api-func-h">2) API Functional Scenarios</h2>
      <div class="grid">
        <div>
          <h3>2.1 Catalog & Search</h3>
          <table>
            <thead><tr><th>Scenario</th><th>Steps</th><th>Expectation</th></tr></thead>
            <tbody>
              <tr><td>Search by text</td><td><code>?q=pizza</code></td><td>Only matching items returned</td></tr>
              <tr><td>Filter by category</td><td><code>?category=Pizza</code></td><td>Only that category</td></tr>
              <tr><td>Pagination</td><td><code>?page=2&amp;limit=1</code></td><td>Exactly 1 item; page=2</td></tr>
              <tr><td>Availability</td><td>hide an item</td><td>Hidden item not listed</td></tr>
            </tbody>
          </table>

          <h3>2.2 Pricing & Coupons</h3>
          <table>
            <thead><tr><th>Scenario</th><th>Steps</th><th>Expectation</th></tr></thead>
            <tbody>
              <tr><td>Coupon valid</td><td><code>POST /cart/price</code> with code</td><td>Discount applied, rounded</td></tr>
              <tr><td>Coupon threshold</td><td>subtotal &lt; <code>minSubtotal</code></td><td class="err">422 error</td></tr>
              <tr><td>VAT calc</td><td>mix 9% &amp; 19%</td><td>Accurate <code>vat</code> and <code>grandTotal</code></td></tr>
            </tbody>
          </table>

          <h3>2.3 Currency</h3>
          <table>
            <thead><tr><th>Endpoint</th><th>Param</th><th>Expectation</th></tr></thead>
            <tbody>
              <tr><td><code>/api/menu</code></td><td><code>?currency=EUR</code></td><td>Each item has <code>price_converted</code></td></tr>
              <tr><td><code>/api/orders</code> / <code>/{id}</code></td><td><code>?currency=USD</code></td><td><code>total_amount_display</code> populated</td></tr>
              <tr><td><code>/api/stats</code></td><td><code>?currency=EUR</code></td><td><code>revenue_display</code> populated</td></tr>
            </tbody>
          </table>
        </div>

        <aside class="card" aria-label="Useful payloads">
          <h3>Useful Payloads</h3>
          <pre><code>{
  "items": [{"id":1,"qty":1},{"id":2,"qty":2}],
  "deliveryMethod":"delivery",
  "couponCode":"SUMMER10"
}</code></pre>
          <h3>Admin Header</h3>
          <pre><code>X-API-Key: YOUR_ADMIN_KEY</code></pre>
        </aside>
      </div>
    </section>

    <!-- API Negative -->
    <section id="api-negative" class="card" aria-labelledby="api-neg-h">
      <h2 id="api-neg-h">3) API Negative & Edge Cases</h2>
      <table>
        <thead><tr><th>Area</th><th>Scenario</th><th>Expectation</th></tr></thead>
        <tbody>
          <tr><td>Validation</td><td>Missing name/phone</td><td class="err">422 with details</td></tr>
          <tr><td>Payment</td><td>Unsupported method</td><td class="err">422 ‚ÄúUnsupported paymentMethod‚Äù</td></tr>
          <tr><td>Delivery</td><td>Invalid delivery</td><td class="err">422</td></tr>
          <tr><td>Stock</td><td>qty &gt; stock</td><td class="err">409 ‚ÄúInsufficient stock‚Äù</td></tr>
          <tr><td>Idempotency</td><td>Replay key</td><td class="ok">Same orderId returned</td></tr>
          <tr><td>Auth</td><td>Admin endpoint w/o key</td><td class="err">403</td></tr>
        </tbody>
      </table>

      <h3>Sample Negative Calls</h3>
      <pre><code># 422: invalid delivery
curl -s -X POST https://apps.qualiadept.eu/testaurant/api/checkout \
  -H "Content-Type: application/json" \
  -d '{"customerName":"A","customerPhone":"B","items":[{"id":1,"qty":1}],"paymentMethod":"cash","deliveryMethod":"teleport"}'

# 409: insufficient stock
curl -s -X POST https://apps.qualiadept.eu/testaurant/api/cart/price \
  -H "Content-Type: application/json" \
  -d '{"items":[{"id":1,"qty":99999}],"deliveryMethod":"pickup"}'
</code></pre>
    </section>

    <!-- Web UI Matrix -->
    <section id="web-ui" class="card" aria-labelledby="ui-h">
      <h2 id="ui-h">4) Web/UI Test Matrix</h2>
      <div class="grid">
        <div>
          <h3>4.1 User Journeys</h3>
          <table>
            <thead><tr><th>Journey</th><th>Steps</th><th>Expectation</th></tr></thead>
            <tbody>
              <tr><td>Add to cart</td><td>Click ‚ÄúAdd‚Äù on a card</td><td class="ok">Toast ‚ÄúAdded‚Äù, cart badge increments</td></tr>
              <tr><td>Apply coupon</td><td>Open cart ‚Üí enter code</td><td class="ok">Totals update</td></tr>
              <tr><td>Checkout</td><td>Fill name/phone ‚Üí place order</td><td class="ok">Success state, order ID visible/logged</td></tr>
              <tr><td>Currency switch</td><td>RON‚ÜíEUR</td><td class="ok">Prices/total re-rendered</td></tr>
              <tr><td>Images</td><td>Cards render</td><td class="ok">Lazy-loaded images or fallback</td></tr>
            </tbody>
          </table>

          <h3>4.2 Responsive checks</h3>
          <table>
            <thead><tr><th>Viewport</th><th>Expect</th></tr></thead>
            <tbody>
              <tr><td>390√ó844 (mobile)</td><td>Single-column cards; sticky cart is reachable with keyboard</td></tr>
              <tr><td>834√ó1112 (tablet)</td><td>Two-column layout; buttons not clipped</td></tr>
              <tr><td>1440√ó900 (desktop)</td><td>Grid of cards; content centered</td></tr>
            </tbody>
          </table>
        </div>

        <aside class="card" aria-label="Stable selectors">
          <h3>Stable Selectors (<code>data-test</code>)</h3>
          <pre><code>&lt;button data-test="add-to-cart"&gt;Add&lt;/button&gt;
&lt;button data-test="open-cart"&gt;Cart&lt;/button&gt;
&lt;button data-test="checkout"&gt;Checkout&lt;/button&gt;
&lt;input data-test="customer-name"&gt;
&lt;input data-test="customer-phone"&gt;
&lt;button data-test="place-order"&gt;Place order&lt;/button&gt;</code></pre>
        </aside>
      </div>
    </section>

    <!-- Admin -->
    <section id="admin" class="card" aria-labelledby="admin-h">
      <h2 id="admin-h">5) Admin & Backoffice Scenarios</h2>
      <table>
        <thead><tr><th>Endpoint</th><th>Action</th><th>Expectation</th></tr></thead>
        <tbody>
          <tr><td><code>GET /api/inventory</code></td><td>List inventory</td><td class="ok">Requires <code>X-API-Key</code></td></tr>
          <tr><td><code>PUT /api/menuitems/{id}/stock</code></td><td>Set stock</td><td class="ok">Stock updated exactly</td></tr>
          <tr><td><code>POST /api/menuitems/{id}/restock</code></td><td>Delta ¬±</td><td class="ok">Stock increased/decreased</td></tr>
          <tr><td><code>GET /api/orders</code></td><td>List orders</td><td class="ok">Paged results</td></tr>
          <tr><td><code>GET /api/stats</code></td><td>Dashboard</td><td class="ok">by_day + top_items</td></tr>
          <tr><td><code>GET /api/rates</code></td><td>Exchange rates</td><td class="ok">Base vs target rates visible</td></tr>
        </tbody>
      </table>

      <h3>Admin cURL</h3>
      <pre><code>APIK=YOUR_ADMIN_KEY

curl -s -H "X-API-Key: $APIK" https://apps.qualiadept.eu/testaurant/api/inventory

curl -s -X PUT https://apps.qualiadept.eu/testaurant/api/menuitems/1/stock \
  -H "X-API-Key: $APIK" -H "Content-Type: application/json" \
  -d '{"stock":3}'
</code></pre>
    </section>

    <!-- Chaos -->
    <section id="chaos" class="card" aria-labelledby="chaos-h">
      <h2 id="chaos-h">6) Chaos & Resilience</h2>
      <p>Use built-in chaos hooks to validate retry/backoff in clients and graceful UI fallbacks.</p>
      <table>
        <thead><tr><th>Hook</th><th>Usage</th><th>Effect</th></tr></thead>
        <tbody>
          <tr><td><code>?slow=NNN</code></td><td><code>/api/menu?slow=1200</code></td><td class="warn">Adds latency (ms)</td></tr>
          <tr><td><code>?chaos=1</code></td><td><code>/api/health?chaos=1</code></td><td class="warn">Random delay & occasional 503</td></tr>
        </tbody>
      </table>

      <h3>Minimal Retry Loop (bash)</h3>
      <pre><code>for i in 1 2 3; do
  code=$(curl -s -o /dev/null -w "%{http_code}" "https://apps.qualiadept.eu/testaurant/api/health?chaos=1")
  if [ "$code" = "200" ]; then echo OK; break; fi
  sleep $((i*i/2))
done</code></pre>
    </section>

    <!-- Data & Fixtures -->
    <section id="data" class="card" aria-labelledby="data-h">
      <h2 id="data-h">7) Data & Fixtures</h2>
      <div class="grid">
        <div>
          <h3>7.1 Test Data Strategy</h3>
          <ul>
            <li>Use **read-only** calls on prod; do destructive flows on staging.</li>
            <li>Prefer isolated data per test (unique phone/name).</li>
            <li>Reset inventory via admin endpoints for stock boundary tests.</li>
          </ul>

          <h3>7.2 Sample Generators</h3>
          <pre><code># Unique phone in bash
echo "+40$(( RANDOM%900000000 + 700000000 ))"

# Unique idempotency key
echo "idem-$(date +%s)$RANDOM"</code></pre>
        </div>

        <aside class="card" aria-label="Seeding notes">
          <h3>7.3 Seeding</h3>
          <p>If you have <code>seed.sql</code> locally, re-seed before runs. On hosted env, prefer admin endpoints to tweak state (stock/rates).</p>
          <h3>7.4 Logging</h3>
          <p>Record <code>orderId</code>, idempotency keys, and timestamps in test logs for traceability.</p>
        </aside>
      </div>
    </section>

    <!-- i18n & Currency -->
    <section id="i18n-currency" class="card" aria-labelledby="i18n-h">
      <h2 id="i18n-h">8) Localization & Currency</h2>
      <table>
        <thead><tr><th>Area</th><th>Check</th><th>Expectation</th></tr></thead>
        <tbody>
          <tr><td>UI Language</td><td>RO/EN toggle</td><td class="ok">Labels, toasts, buttons translated</td></tr>
          <tr><td>Currency</td><td>RON ‚Üî EUR ‚Üî USD</td><td class="ok">Converted fields appear; symbols and rounding correct</td></tr>
          <tr><td>Formatting</td><td>Decimal separators</td><td class="ok">Consistent formatting per locale</td></tr>
        </tbody>
      </table>

      <h3>Rates Admin</h3>
      <pre><code># Set EUR rate (RON base)
curl -s -X POST https://apps.qualiadept.eu/testaurant/api/rates \
  -H "X-API-Key: $APIK" -H "Content-Type: application/json" \
  -d '{"currency":"EUR","rate":0.2}'</code></pre>
    </section>

    <!-- Accessibility -->
    <section id="accessibility" class="card" aria-labelledby="a11y-h">
      <h2 id="a11y-h">9) Accessibility Checks</h2>
      <table>
        <thead><tr><th>Area</th><th>Check</th><th>Expectation</th></tr></thead>
        <tbody>
          <tr><td>Keyboard</td><td>Tab through controls</td><td class="ok">Visible focus ring; operable without mouse</td></tr>
          <tr><td>Semantics</td><td>Buttons/labels</td><td class="ok">Use semantic elements & ARIA where needed</td></tr>
          <tr><td>Contrast</td><td>Dark & light</td><td class="ok">Sufficient contrast, no color-only meaning</td></tr>
          <tr><td>Toasts</td><td>Announcements</td><td class="ok">Polite live region for success/failure</td></tr>
        </tbody>
      </table>

      <h3>Manual Keyboard Flow</h3>
      <pre><code>1. Tab to menu card "Add" ‚Üí Enter
2. Open cart ‚Üí Apply coupon (Tab)
3. Go to checkout ‚Üí Fill fields ‚Üí Submit
Expected: No traps, visible focus, success confirmation announced</code></pre>
    </section>

    <!-- Performance -->
    <section id="perf" class="card" aria-labelledby="perf-h">
      <h2 id="perf-h">10) Performance & SLIs</h2>
      <table>
        <thead><tr><th>Endpoint</th><th>Target</th><th>Notes</th></tr></thead>
        <tbody>
          <tr><td><code>/api/health</code></td><td>&lt; 150ms p95</td><td>Cold starts may be higher</td></tr>
          <tr><td><code>/api/menu</code></td><td>&lt; 300ms p95</td><td>Pagination reduces payload</td></tr>
          <tr><td><code>/api/checkout</code></td><td>&lt; 600ms p95</td><td>Includes DB writes & stock updates</td></tr>
        </tbody>
      </table>

      <h3>Quick baseline (bash)</h3>
      <pre><code>for i in {1..5}; do time curl -s https://apps.qualiadept.eu/testaurant/api/menu &gt;/dev/null; done</code></pre>
    </section>

    <!-- Checklist -->
    <section id="checklist" class="card" aria-labelledby="checklist-h">
      <h2 id="checklist-h">‚úÖ Progress Checklist</h2>
      <ul class="checklist" id="todo" role="list">
        <li><input type="checkbox" data-key="smoke" id="c1"><label for="c1">API Smoke suite passes</label></li>
        <li><input type="checkbox" data-key="func" id="c2"><label for="c2">Functional scenarios covered (search, pagination, coupons, VAT)</label></li>
        <li><input type="checkbox" data-key="neg" id="c3"><label for="c3">Negative cases implemented (422/409/403)</label></li>
        <li><input type="checkbox" data-key="ui" id="c4"><label for="c4">UI journeys automated (add‚Üícheckout, currency switch)</label></li>
        <li><input type="checkbox" data-key="a11y" id="c5"><label for="c5">Accessibility checks completed</label></li>
        <li><input type="checkbox" data-key="chaos" id="c6"><label for="c6">Chaos & resilience tests validated</label></li>
        <li><input type="checkbox" data-key="admin" id="c7"><label for="c7">Admin inventory/rates/stats covered</label></li>
        <li><input type="checkbox" data-key="perf" id="c8"><label for="c8">Baseline performance recorded</label></li>
      </ul>
    </section>

    <footer role="contentinfo" aria-label="Footer">
      <p>
        Need the API contract? Open <strong>API Specs</strong> here:
        <a href="https://apps.qualiadept.eu/testaurant/api_specs/">https://apps.qualiadept.eu/testaurant/api_specs/</a>.
        Return to <a href="https://apps.qualiadept.eu/testaurant/frontend/index.html">Main Page</a>.
      </p>
      <p class="badge" aria-label="Version">Instructions Hub v1.0 ‚Ä¢ Testaurant QA Community</p>
    </footer>
  </main>

  <!-- Copy-to-clipboard for all <pre><code> blocks (accessible, no libs) -->
  <script>
    (function () {
      const blocks = Array.from(document.querySelectorAll('pre')).filter(pre => !pre.matches('[data-no-copy]'));
      blocks.forEach(pre => {
        pre.classList.add('pre-wrap');
        const btn = document.createElement('button');
        btn.className = 'copy-btn';
        btn.type = 'button';
        btn.setAttribute('aria-label', 'Copy code to clipboard');
        btn.setAttribute('title', 'Copy');
        btn.textContent = 'Copy';

        const live = document.createElement('span');
        live.setAttribute('aria-live', 'polite');
        live.style.position = 'absolute';
        live.style.width = '1px';
        live.style.height = '1px';
        live.style.overflow = 'hidden';
        live.style.clip = 'rect(1px,1px,1px,1px)';
        live.style.clipPath = 'inset(50%)';
        live.style.whiteSpace = 'nowrap';
        btn.appendChild(live);

        btn.addEventListener('click', async () => {
          const code = pre.querySelector('code');
          const text = code ? code.innerText : pre.innerText;
          try {
            if (navigator.clipboard && navigator.clipboard.writeText) {
              await navigator.clipboard.writeText(text);
            } else {
              const ta = document.createElement('textarea');
              ta.value = text; ta.setAttribute('readonly','');
              ta.style.position = 'fixed'; ta.style.top = '-1000px';
              document.body.appendChild(ta); ta.select(); document.execCommand('copy');
              document.body.removeChild(ta);
            }
            const old = btn.textContent.replace(/\s*Copied!?$/, '');
            btn.textContent = 'Copied!';
            live.textContent = 'Copied to clipboard';
            setTimeout(() => { btn.textContent = old || 'Copy'; live.textContent = ''; }, 1500);
          } catch (e) {
            const old = btn.textContent;
            btn.textContent = 'Failed';
            live.textContent = 'Copy failed';
            setTimeout(() => { btn.textContent = old; live.textContent = ''; }, 1500);
          }
        });

        pre.appendChild(btn);
      });
    })();
  </script>

  <!-- Persistent checklist state -->
  <script>
    (function(){
      const list = document.getElementById('todo'); if(!list) return;
      const KEY = 'testaurant_instructions_checklist_v1';
      const state = JSON.parse(localStorage.getItem(KEY) || '{}');
      [...list.querySelectorAll('input[type="checkbox"][data-key]')].forEach(cb=>{
        const k = cb.dataset.key; cb.checked = !!state[k];
        cb.addEventListener('change', ()=>{ state[k] = cb.checked; localStorage.setItem(KEY, JSON.stringify(state)); });
      });
    })();
  </script>
</body>
</html>
